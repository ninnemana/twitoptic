{"ts":1374472759988,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1374473046127,"patch":[[{"diffs":[[1,"\n/*\n * GET home page.\n */\n \nvar OAuth = require('oauth').OAuth,\n    sys = require('sys'),\n    url = require('url');\n\nvar _twitterConsumerKey = \"mHhRqtHf6UI8Rr6jihEPBA\";\nvar _twitterConsumerSecret = \"RRk6zEvQoT06zkPrnjiPY6emfDuvWnwZ8IYZ5K2938\";\nvar _twitterAuthEndpointUrl = \"https://api.twitter.com/oauth/authentication?oauth_token=\";\nvar _requestTokenUrl = \"https://api.twitter.com/oauth/request_token\";\nvar _authorizeUrl = \"https://api.twitter.com/oauth/access_token\";\nvar _callbackUrl = \"http://twitoptic.ninnemana.c9.io/oauth/callback\";\nvar global_secret_lookup = {};\n\nvar oa = new OAuth(_requestTokenUrl, \n                    _authorizeUrl\n                    ,_twitterConsumerKey, \n                    _twitterConsumerSecret, \n                    '1.0', \n                    null, \n                    'HMAC-SHA1');\n\nexports.oauth = function(req, res){\n    console.log(\"Default Url\");\n    oa.getXAuthRequestToken(function(error, oauth_token, oauth_token_secret, results){\n        if(error){\n            console.log('error: ' + sys.inspect(error));\n            var errResponse = 'Unable to retrieve request token';\n            res.writeHead(200, {'Content-Type':'text/plain','Content-Length': errResponse.length});\n            res.end(errResponse);\n        }else{\n            console.log('oauth_token:' + oauth_token);\n            console.log('oauth_token_secret: ' + oauth_token_secret);\n            console.log('request token results: ' + sys.inspect(results));\n            \n            global_secret_lookup[oauth_token] = oauth_token_secret;\n            \n            var twitterAuthEndpoint = _twitterAuthEndpointUrl + oauth_token;\n            console.log('Redirect to: ' + twitterAuthEndpoint);\n            res.writeHead(301, {\n                'Content-Type': 'text/plain',\n                'Location': twitterAuthEndpoint\n                });\n                \n            res.end('Redirecting...\\n');\n            \n        }\n    });\n  //res.render('index', { title: 'Express' });\n};\n\nexports.oauth_callback = function(req, res){\n    console.log('Callback Url');\n  \n    var parsedUrl = URL.parse(req.url);\n    var parsedQuery = querystring.parse(parsedUrl.query);\n    \n    console.log(parsedQuery);\n    \n    res.end(parsedQuery);\n};"]],"start1":0,"start2":0,"length1":0,"length2":2238}]],"length":2238,"saved":false}
{"ts":1374473747038,"patch":[[{"diffs":[[0,".get"],[-1,"X"],[1,"O"],[0,"Auth"]],"start1":897,"start2":897,"length1":9,"length2":9}]],"length":2238,"saved":false}
